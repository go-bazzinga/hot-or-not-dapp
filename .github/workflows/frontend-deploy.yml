name: Deploy frontend
on:
  push:
    branches:
      - main
    paths:
      - 'src/frontend/**'
      - '.github/workflows/frontend-deploy.yml'

jobs:
  frontend-deploy:
    runs-on: ubuntu-latest
    # steps:
    #   - uses: actions/checkout@v2
    #   - uses: actions/setup-node@v2
    #     with:
    #       node-version: '16'
    #   - run: npm install
    #   - run: |
    #       touch .env
    #       echo "VITE_CLOUDFLARE_WORKERS_API_URL=\"$VITE_CLOUDFLARE_WORKERS_API_URL\"" >> .env
    #       echo "VITE_INTERNET_IDENTITY_URL=\"$VITE_INTERNET_IDENTITY_URL\"" >> .env
    #       echo "VITE_GA_TRACKING_ID=\"$VITE_GA_TRACKING_ID\"" >> .env
    #     working-directory: src/frontend/
    #     env:
    #       VITE_INTERNET_IDENTITY_URL: 'https://identity.ic0.app/#authorize'
    #       VITE_GA_TRACKING_ID: 'TODO'
    #   - run: npm run build
    #   - run: DFX_VERSION=0.9.3 sh -ci "$(curl -fsSL https://smartcontracts.org/install.sh)"
    #   - run: dfx identity list
    #   - run: |
    #       touch actions_identity.pem
    #       echo "${{ secrets.ACTIONS_IDENTITY_SECRET }}" > actions_identity.pem
    #       dfx identity import actions actions_identity.pem
    #       rm actions_identity.pem
    #       dfx identity use actions
    #   - run: dfx identity --network ic set-wallet ${{ secrets.ACTIONS_IDENTITY_DEFAULT_WALLET }}
    #   - run: dfx deploy --network ic frontend
